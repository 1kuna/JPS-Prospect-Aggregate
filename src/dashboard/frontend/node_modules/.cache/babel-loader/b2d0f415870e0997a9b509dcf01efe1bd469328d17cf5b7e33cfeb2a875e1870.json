{"ast":null,"code":"import { mapGetters } from 'vuex';\nimport axios from 'axios';\n\n// Get the API base URL from environment or use default\nconst apiBaseUrl = process.env.VUE_APP_API_URL || 'http://localhost:5001/api';\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n      search: '',\n      headers: [{\n        title: 'ID',\n        key: 'id',\n        align: 'start',\n        sortable: true\n      }, {\n        title: 'Title',\n        key: 'title',\n        align: 'start',\n        sortable: true\n      }, {\n        title: 'Source',\n        key: 'source',\n        align: 'start',\n        sortable: true\n      }, {\n        title: 'Date',\n        key: 'date',\n        align: 'start',\n        sortable: true\n      }, {\n        title: 'Status',\n        key: 'status',\n        align: 'start',\n        sortable: true\n      }],\n      healthResults: [],\n      confirmDialog: {\n        show: false,\n        title: '',\n        message: '',\n        requireInput: false,\n        inputLabel: '',\n        input: '',\n        action: null\n      },\n      snackbar: {\n        show: false,\n        text: '',\n        color: 'success',\n        timeout: 5000\n      },\n      // New properties for filters\n      statusFilter: 'All',\n      sourceFilter: 'All',\n      dateRange: [],\n      dateMenu: false,\n      naicsFilter: null,\n      setAsideFilter: 'All',\n      // New property for proposal details dialog\n      proposalDialog: {\n        show: false,\n        proposal: null\n      }\n    };\n  },\n  computed: {\n    ...mapGetters(['isLoading', 'hasError', 'errorMessage', 'dashboardData', 'lastUpdated']),\n    // Computed property for filtered proposals\n    filteredProposals() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return [];\n      }\n      let filtered = [...this.dashboardData.proposals];\n\n      // Apply search filter\n      if (this.search) {\n        const searchLower = this.search.toLowerCase();\n        filtered = filtered.filter(proposal => proposal.title.toLowerCase().includes(searchLower) || proposal.id.toString().includes(searchLower) || proposal.source.toLowerCase().includes(searchLower));\n      }\n\n      // Apply status filter\n      if (this.statusFilter !== 'All') {\n        filtered = filtered.filter(proposal => proposal.status === this.statusFilter);\n      }\n\n      // Apply source filter\n      if (this.sourceFilter !== 'All') {\n        filtered = filtered.filter(proposal => proposal.source === this.sourceFilter);\n      }\n\n      // Apply date range filter\n      if (this.dateRange.length === 2) {\n        const startDate = new Date(this.dateRange[0]);\n        const endDate = new Date(this.dateRange[1]);\n        endDate.setHours(23, 59, 59, 999); // End of day\n\n        filtered = filtered.filter(proposal => {\n          const proposalDate = new Date(proposal.date);\n          return proposalDate >= startDate && proposalDate <= endDate;\n        });\n      }\n\n      // Apply NAICS filter\n      if (this.naicsFilter) {\n        filtered = filtered.filter(proposal => proposal.naicsCode === this.naicsFilter);\n      }\n\n      // Apply set-aside filter\n      if (this.setAsideFilter !== 'All') {\n        filtered = filtered.filter(proposal => proposal.setAside === this.setAsideFilter);\n      }\n      return filtered;\n    },\n    // Computed property for date range text\n    dateRangeText() {\n      if (!this.dateRange || this.dateRange.length === 0) {\n        return '';\n      }\n      if (this.dateRange.length === 1) {\n        return this.formatDateShort(this.dateRange[0]);\n      }\n      return `${this.formatDateShort(this.dateRange[0])} - ${this.formatDateShort(this.dateRange[1])}`;\n    },\n    // Computed property for source options\n    sourceOptions() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return ['All'];\n      }\n      const sources = new Set(this.dashboardData.proposals.map(p => p.source));\n      return ['All', ...Array.from(sources)];\n    },\n    // Computed property for NAICS codes\n    naicsCodes() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return [];\n      }\n      const naicsCodes = new Set();\n      this.dashboardData.proposals.forEach(p => {\n        if (p.naicsCode) {\n          naicsCodes.add(p.naicsCode);\n        }\n      });\n      return Array.from(naicsCodes);\n    },\n    // Computed property for set-aside options\n    setAsideOptions() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return ['All'];\n      }\n      const setAsides = new Set();\n      this.dashboardData.proposals.forEach(p => {\n        if (p.setAside) {\n          setAsides.add(p.setAside);\n        }\n      });\n      return ['All', ...Array.from(setAsides)];\n    }\n  },\n  methods: {\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      const date = new Date(dateString);\n      return date.toLocaleString();\n    },\n    formatDateShort(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    getStatusColor(status) {\n      const statusMap = {\n        'Active': 'success',\n        'Pending': 'warning',\n        'Completed': 'info',\n        'Cancelled': 'error'\n      };\n      return statusMap[status] || 'grey';\n    },\n    // New method to reset filters\n    resetFilters() {\n      this.search = '';\n      this.statusFilter = 'All';\n      this.sourceFilter = 'All';\n      this.dateRange = [];\n      this.naicsFilter = null;\n      this.setAsideFilter = 'All';\n    },\n    // New method to show proposal details\n    showProposalDetails(proposal) {\n      this.proposalDialog.proposal = proposal;\n      this.proposalDialog.show = true;\n    },\n    showConfirmDialog(title, message, action, requireInput = false, inputLabel = '') {\n      this.confirmDialog = {\n        show: true,\n        title,\n        message,\n        requireInput,\n        inputLabel,\n        input: '',\n        action\n      };\n    },\n    confirmAction() {\n      if (this.confirmDialog.requireInput && this.confirmDialog.input !== this.confirmDialog.inputLabel) {\n        this.showSnackbar('Please type the confirmation text exactly as shown', 'error');\n        return;\n      }\n      this.confirmDialog.show = false;\n      if (typeof this.confirmDialog.action === 'function') {\n        this.confirmDialog.action();\n      }\n    },\n    showSnackbar(text, color = 'success', timeout = 5000) {\n      this.snackbar = {\n        show: true,\n        text,\n        color,\n        timeout\n      };\n    },\n    rebuildDatabase() {\n      this.showConfirmDialog('Rebuild Database', 'WARNING: This will rebuild the database from scratch.<br><br>' + 'This operation will:<br>' + '1. Create a backup of the current database<br>' + '2. Rebuild the database structure<br>' + '3. Preserve your data<br><br>' + 'The application may need to be restarted after this operation.', this.performDatabaseRebuild);\n    },\n    async performDatabaseRebuild() {\n      try {\n        await axios.post(`${apiBaseUrl}/rebuild-db`);\n        this.showSnackbar('Database rebuild started. The application may need to be restarted.');\n      } catch (error) {\n        console.error('Error rebuilding database:', error);\n        this.showSnackbar('Failed to rebuild database: ' + error.message, 'error');\n      }\n    },\n    initializeDatabase() {\n      this.showConfirmDialog('Initialize Database', 'WARNING: This will delete the current database and create a new one!<br><br>' + 'This operation will:<br>' + '1. Delete ALL existing data<br>' + '2. Create a new empty database<br>' + '3. Initialize the data sources<br><br>' + 'This operation cannot be undone. All your data will be permanently lost.', this.performDatabaseInitialization, true, 'INIT');\n    },\n    async performDatabaseInitialization() {\n      try {\n        await axios.post(`${apiBaseUrl}/init-db`);\n        this.showSnackbar('Database initialization started. The page will reload shortly.');\n        setTimeout(() => window.location.reload(), 5000);\n      } catch (error) {\n        console.error('Error initializing database:', error);\n        this.showSnackbar('Failed to initialize database: ' + error.message, 'error');\n      }\n    },\n    deleteAllFiles() {\n      this.showConfirmDialog('Delete All Files', 'WARNING: This is a destructive operation!<br><br>' + 'This will:<br>' + '1. Delete ALL downloaded files<br>' + '2. Delete ALL database backups<br>' + '3. Delete the current database<br>' + '4. Create a new empty database<br><br>' + 'This operation cannot be undone. All your data will be permanently lost.', this.performDeleteAllFiles, true, 'RESET');\n    },\n    async performDeleteAllFiles() {\n      try {\n        await axios.post(`${apiBaseUrl}/reset-everything`);\n        this.showSnackbar('Reset initiated. The application will be reloaded shortly.');\n        setTimeout(() => window.location.reload(), 5000);\n      } catch (error) {\n        console.error('Error resetting everything:', error);\n        this.showSnackbar('Failed to reset: ' + error.message, 'error');\n      }\n    },\n    async runHealthChecks() {\n      try {\n        this.healthResults = [];\n        this.showSnackbar('Running health checks...', 'info');\n\n        // Get all data sources\n        const sourcesResponse = await axios.get(`${apiBaseUrl}/data-sources`);\n        const sources = sourcesResponse.data;\n        if (!sources || sources.length === 0) {\n          this.showSnackbar('No data sources found', 'warning');\n          return;\n        }\n\n        // Run health checks for each source\n        const healthCheckPromises = sources.map(source => axios.post(`${apiBaseUrl}/scraper-status/${source.id}/check`).then(response => {\n          const result = response.data;\n          result.sourceName = source.name;\n          return result;\n        }));\n\n        // Wait for all health checks to complete\n        this.healthResults = await Promise.all(healthCheckPromises);\n\n        // Count successes and failures\n        const successes = this.healthResults.filter(result => result.success && result.status === 'working').length;\n        const failures = this.healthResults.filter(result => result.success && result.status === 'not_working').length;\n        const errors = this.healthResults.filter(result => !result.success).length;\n        this.showSnackbar(`Health checks completed: ${successes} working, ${failures} not working, ${errors} errors.`);\n      } catch (error) {\n        console.error('Error running health checks:', error);\n        this.showSnackbar('Failed to run health checks: ' + error.message, 'error');\n      }\n    }\n  },\n  mounted() {\n    this.$store.dispatch('fetchDashboardData');\n  }\n};","map":{"version":3,"names":["mapGetters","axios","apiBaseUrl","process","env","VUE_APP_API_URL","name","data","search","headers","title","key","align","sortable","healthResults","confirmDialog","show","message","requireInput","inputLabel","input","action","snackbar","text","color","timeout","statusFilter","sourceFilter","dateRange","dateMenu","naicsFilter","setAsideFilter","proposalDialog","proposal","computed","filteredProposals","dashboardData","proposals","filtered","searchLower","toLowerCase","filter","includes","id","toString","source","status","length","startDate","Date","endDate","setHours","proposalDate","date","naicsCode","setAside","dateRangeText","formatDateShort","sourceOptions","sources","Set","map","p","Array","from","naicsCodes","forEach","add","setAsideOptions","setAsides","methods","formatDate","dateString","toLocaleString","toLocaleDateString","getStatusColor","statusMap","resetFilters","showProposalDetails","showConfirmDialog","confirmAction","showSnackbar","rebuildDatabase","performDatabaseRebuild","post","error","console","initializeDatabase","performDatabaseInitialization","setTimeout","window","location","reload","deleteAllFiles","performDeleteAllFiles","runHealthChecks","sourcesResponse","get","healthCheckPromises","then","response","result","sourceName","Promise","all","successes","success","failures","errors","mounted","$store","dispatch"],"sources":["/Users/zach/Documents/Git/JPS-Prospect-Aggregate/src/dashboard/frontend/src/views/Dashboard.vue"],"sourcesContent":["<template>\n  <div>\n    <v-alert\n      v-if=\"hasError\"\n      type=\"error\"\n      dismissible\n      variant=\"tonal\"\n      border=\"start\"\n      class=\"mb-4\"\n    >\n      {{ errorMessage }}\n    </v-alert>\n\n    <!-- Page header with title and last updated info -->\n    <div class=\"d-flex align-center mb-4\">\n      <h1 class=\"text-h4 font-weight-bold\">Dashboard</h1>\n      <v-spacer></v-spacer>\n      <v-chip\n        v-if=\"lastUpdated\"\n        color=\"primary\"\n        size=\"small\"\n        variant=\"outlined\"\n        prepend-icon=\"mdi-clock-outline\"\n      >\n        Last updated: {{ formatDate(lastUpdated) }}\n      </v-chip>\n    </div>\n\n    <!-- Loading state -->\n    <v-progress-linear\n      v-if=\"isLoading\"\n      indeterminate\n      color=\"primary\"\n      class=\"mb-4\"\n    ></v-progress-linear>\n    \n    <!-- No data state -->\n    <v-alert\n      v-else-if=\"!dashboardData\"\n      type=\"info\"\n      variant=\"tonal\"\n      border=\"start\"\n      icon=\"mdi-information-outline\"\n    >\n      No data available. Click the refresh button to load data.\n    </v-alert>\n    \n    <!-- Dashboard content -->\n    <div v-else>\n      <!-- Proposals Table with Filters - Moved to top for prominence -->\n      <v-row>\n        <!-- Filters Panel -->\n        <v-col cols=\"12\" md=\"3\" lg=\"2\">\n          <v-card elevation=\"1\" class=\"mb-6\">\n            <v-card-title class=\"py-3 px-4\">\n              <v-icon size=\"small\" color=\"primary\" class=\"mr-2\">mdi-filter</v-icon>\n              Filters\n            </v-card-title>\n            \n            <v-divider></v-divider>\n            \n            <v-card-text class=\"py-2\">\n              <!-- Search filter -->\n              <v-text-field\n                v-model=\"search\"\n                prepend-inner-icon=\"mdi-magnify\"\n                label=\"Search proposals\"\n                single-line\n                hide-details\n                density=\"compact\"\n                variant=\"outlined\"\n                class=\"mb-4\"\n              ></v-text-field>\n              \n              <!-- Status filter -->\n              <v-select\n                v-model=\"statusFilter\"\n                label=\"Status\"\n                :items=\"['All', 'Active', 'Pending', 'Completed', 'Cancelled']\"\n                variant=\"outlined\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-4\"\n              ></v-select>\n              \n              <!-- Source filter -->\n              <v-select\n                v-model=\"sourceFilter\"\n                label=\"Source\"\n                :items=\"sourceOptions\"\n                variant=\"outlined\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-4\"\n              ></v-select>\n              \n              <!-- Date range filter -->\n              <v-menu\n                v-model=\"dateMenu\"\n                :close-on-content-click=\"false\"\n                location=\"bottom\"\n              >\n                <template v-slot:activator=\"{ props }\">\n                  <v-text-field\n                    v-bind=\"props\"\n                    v-model=\"dateRangeText\"\n                    label=\"Date Range\"\n                    prepend-inner-icon=\"mdi-calendar\"\n                    readonly\n                    variant=\"outlined\"\n                    density=\"compact\"\n                    hide-details\n                    class=\"mb-4\"\n                  ></v-text-field>\n                </template>\n                <v-date-picker\n                  v-model=\"dateRange\"\n                  range\n                  @update:model-value=\"dateMenu = false\"\n                ></v-date-picker>\n              </v-menu>\n              \n              <!-- NAICS code filter -->\n              <v-autocomplete\n                v-model=\"naicsFilter\"\n                label=\"NAICS Code\"\n                :items=\"naicsCodes\"\n                variant=\"outlined\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-4\"\n              ></v-autocomplete>\n              \n              <!-- Set-aside filter -->\n              <v-select\n                v-model=\"setAsideFilter\"\n                label=\"Set-Aside\"\n                :items=\"setAsideOptions\"\n                variant=\"outlined\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-4\"\n              ></v-select>\n              \n              <!-- Reset filters button -->\n              <v-btn\n                block\n                color=\"primary\"\n                variant=\"tonal\"\n                prepend-icon=\"mdi-refresh\"\n                @click=\"resetFilters\"\n                class=\"mt-2\"\n              >\n                Reset Filters\n              </v-btn>\n            </v-card-text>\n          </v-card>\n        </v-col>\n        \n        <!-- Proposals Table -->\n        <v-col cols=\"12\" md=\"9\" lg=\"10\">\n          <v-card elevation=\"1\" class=\"mb-6\">\n            <v-card-title class=\"py-4 px-6\">\n              <v-icon size=\"small\" color=\"primary\" class=\"mr-2\">mdi-table</v-icon>\n              Recent Proposals\n            </v-card-title>\n            \n            <v-divider></v-divider>\n            \n            <v-data-table\n              :headers=\"headers\"\n              :items=\"filteredProposals\"\n              :loading=\"isLoading\"\n              loading-text=\"Loading proposals...\"\n              no-data-text=\"No proposals available\"\n              class=\"proposal-table\"\n            >\n              <template v-slot:item=\"{ item, columns }\">\n                <tr \n                  @click=\"showProposalDetails(item)\"\n                  class=\"proposal-row\"\n                >\n                  <td v-for=\"(column, i) in columns\" :key=\"i\">\n                    <template v-if=\"column.key === 'status'\">\n                      <v-chip\n                        :color=\"getStatusColor(item.status)\"\n                        size=\"small\"\n                        variant=\"tonal\"\n                      >\n                        {{ item.status }}\n                      </v-chip>\n                    </template>\n                    <template v-else-if=\"column.key === 'date'\">\n                      {{ formatDate(item.date) }}\n                    </template>\n                    <template v-else>\n                      {{ item[column.key] }}\n                    </template>\n                  </td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card>\n        </v-col>\n      </v-row>\n      \n      <!-- Summary Cards - Condensed into a single row -->\n      <v-row>\n        <v-col cols=\"12\" md=\"4\">\n          <v-card elevation=\"1\" class=\"h-100\">\n            <v-card-text class=\"d-flex flex-column align-center py-4\">\n              <v-icon\n                size=\"36\"\n                color=\"primary\"\n                class=\"mb-1\"\n              >mdi-file-document-multiple-outline</v-icon>\n              <span class=\"text-h6 font-weight-medium mb-1\">Total Proposals</span>\n              <span class=\"text-h4 font-weight-bold primary--text\">\n                {{ dashboardData.totalProposals || 0 }}\n              </span>\n            </v-card-text>\n          </v-card>\n        </v-col>\n        \n        <v-col cols=\"12\" md=\"4\">\n          <v-card elevation=\"1\" class=\"h-100\">\n            <v-card-text class=\"d-flex flex-column align-center py-4\">\n              <v-icon\n                size=\"36\"\n                color=\"success\"\n                class=\"mb-1\"\n              >mdi-database-check-outline</v-icon>\n              <span class=\"text-h6 font-weight-medium mb-1\">Active Sources</span>\n              <span class=\"text-h4 font-weight-bold success--text\">\n                {{ dashboardData.activeSources || 0 }}\n              </span>\n            </v-card-text>\n          </v-card>\n        </v-col>\n        \n        <v-col cols=\"12\" md=\"4\">\n          <v-card elevation=\"1\" class=\"h-100\">\n            <v-card-text class=\"d-flex flex-column align-center py-4\">\n              <v-icon\n                size=\"36\"\n                color=\"info\"\n                class=\"mb-1\"\n              >mdi-calendar-clock</v-icon>\n              <span class=\"text-h6 font-weight-medium mb-1\">Last Scrape</span>\n              <span class=\"text-subtitle-1 font-weight-bold info--text\">\n                {{ formatDate(dashboardData.lastScrape) || 'Never' }}\n              </span>\n            </v-card-text>\n          </v-card>\n        </v-col>\n      </v-row>\n      \n      <!-- Advanced Features Section -->\n      <v-card elevation=\"1\" class=\"mt-6\">\n        <v-card-title class=\"py-3 px-6\">\n          <v-icon size=\"small\" color=\"primary\" class=\"mr-2\">mdi-tools</v-icon>\n          Advanced Features\n        </v-card-title>\n        \n        <v-divider></v-divider>\n        \n        <v-card-text class=\"py-4\">\n          <v-row>\n            <v-col cols=\"12\" md=\"6\" lg=\"3\">\n              <v-btn\n                block\n                color=\"primary\"\n                variant=\"tonal\"\n                prepend-icon=\"mdi-database-refresh\"\n                @click=\"rebuildDatabase\"\n                class=\"mb-2\"\n              >\n                Rebuild Database\n              </v-btn>\n            </v-col>\n            \n            <v-col cols=\"12\" md=\"6\" lg=\"3\">\n              <v-btn\n                block\n                color=\"primary\"\n                variant=\"tonal\"\n                prepend-icon=\"mdi-database-plus\"\n                @click=\"initializeDatabase\"\n                class=\"mb-2\"\n              >\n                Initialize Database\n              </v-btn>\n            </v-col>\n            \n            <v-col cols=\"12\" md=\"6\" lg=\"3\">\n              <v-btn\n                block\n                color=\"error\"\n                variant=\"tonal\"\n                prepend-icon=\"mdi-delete\"\n                @click=\"deleteAllFiles\"\n                class=\"mb-2\"\n              >\n                Delete All Files\n              </v-btn>\n            </v-col>\n            \n            <v-col cols=\"12\" md=\"6\" lg=\"3\">\n              <v-btn\n                block\n                color=\"warning\"\n                variant=\"tonal\"\n                prepend-icon=\"mdi-heart-pulse\"\n                @click=\"runHealthChecks\"\n                class=\"mb-2\"\n              >\n                Run Health Checks\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n      \n      <!-- Health Info Section (shown when health checks are run) -->\n      <v-card v-if=\"healthResults.length > 0\" elevation=\"1\" class=\"mt-6\">\n        <v-card-title class=\"py-3 px-6\">\n          <v-icon size=\"small\" color=\"warning\" class=\"mr-2\">mdi-heart-pulse</v-icon>\n          Health Information\n        </v-card-title>\n        \n        <v-divider></v-divider>\n        \n        <v-card-text class=\"py-4\">\n          <v-row>\n            <v-col v-for=\"(result, index) in healthResults\" :key=\"index\" cols=\"12\" md=\"6\" lg=\"4\">\n              <v-card outlined>\n                <v-card-title class=\"py-2\">\n                  {{ result.sourceName }}\n                  <v-spacer></v-spacer>\n                  <v-icon\n                    :color=\"result.status === 'working' ? 'success' : 'error'\"\n                  >\n                    {{ result.status === 'working' ? 'mdi-check-circle' : 'mdi-alert-circle' }}\n                  </v-icon>\n                </v-card-title>\n                <v-divider></v-divider>\n                <v-card-text>\n                  <p><strong>Status:</strong> {{ result.status === 'working' ? 'Working' : 'Not Working' }}</p>\n                  <p v-if=\"result.message\"><strong>Message:</strong> {{ result.message }}</p>\n                  <p v-if=\"result.lastCheck\"><strong>Last Check:</strong> {{ formatDate(result.lastCheck) }}</p>\n                </v-card-text>\n              </v-card>\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n    </div>\n    \n    <!-- Confirmation Dialog -->\n    <v-dialog v-model=\"confirmDialog.show\" max-width=\"500\">\n      <v-card>\n        <v-card-title class=\"text-h5\">{{ confirmDialog.title }}</v-card-title>\n        <v-card-text>\n          <p v-html=\"confirmDialog.message\"></p>\n          <v-text-field\n            v-if=\"confirmDialog.requireInput\"\n            v-model=\"confirmDialog.input\"\n            :label=\"confirmDialog.inputLabel\"\n            variant=\"outlined\"\n            class=\"mt-4\"\n          ></v-text-field>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"grey-darken-1\" variant=\"text\" @click=\"confirmDialog.show = false\">Cancel</v-btn>\n          <v-btn color=\"error\" variant=\"tonal\" @click=\"confirmAction\">Confirm</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    \n    <!-- Success/Error Snackbar -->\n    <v-snackbar v-model=\"snackbar.show\" :color=\"snackbar.color\" :timeout=\"snackbar.timeout\">\n      {{ snackbar.text }}\n      <template v-slot:actions>\n        <v-btn variant=\"text\" @click=\"snackbar.show = false\">Close</v-btn>\n      </template>\n    </v-snackbar>\n    \n    <!-- Proposal Details Dialog -->\n    <v-dialog v-model=\"proposalDialog.show\" max-width=\"800px\">\n      <v-card>\n        <v-card-title class=\"py-3 px-6 text-h5\">\n          {{ proposalDialog.proposal ? proposalDialog.proposal.title : 'Proposal Details' }}\n          <v-spacer></v-spacer>\n          <v-btn icon @click=\"proposalDialog.show = false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-card-title>\n        \n        <v-divider></v-divider>\n        \n        <v-card-text v-if=\"proposalDialog.proposal\" class=\"py-4\">\n          <v-row>\n            <v-col cols=\"12\" md=\"6\">\n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">ID</p>\n              <p class=\"mb-3\">{{ proposalDialog.proposal.id }}</p>\n              \n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Source</p>\n              <p class=\"mb-3\">{{ proposalDialog.proposal.source }}</p>\n              \n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Date</p>\n              <p class=\"mb-3\">{{ formatDate(proposalDialog.proposal.date) }}</p>\n              \n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Status</p>\n              <v-chip\n                :color=\"getStatusColor(proposalDialog.proposal.status)\"\n                size=\"small\"\n                variant=\"tonal\"\n                class=\"mb-3\"\n              >\n                {{ proposalDialog.proposal.status }}\n              </v-chip>\n            </v-col>\n            \n            <v-col cols=\"12\" md=\"6\">\n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">NAICS Code</p>\n              <p class=\"mb-3\">{{ proposalDialog.proposal.naicsCode || 'N/A' }}</p>\n              \n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Set-Aside</p>\n              <p class=\"mb-3\">{{ proposalDialog.proposal.setAside || 'N/A' }}</p>\n              \n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Agency</p>\n              <p class=\"mb-3\">{{ proposalDialog.proposal.agency || 'N/A' }}</p>\n              \n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Due Date</p>\n              <p class=\"mb-3\">{{ formatDate(proposalDialog.proposal.dueDate) || 'N/A' }}</p>\n            </v-col>\n            \n            <v-col cols=\"12\">\n              <p class=\"text-subtitle-2 font-weight-bold mb-1\">Description</p>\n              <p class=\"mb-3\">{{ proposalDialog.proposal.description || 'No description available.' }}</p>\n              \n              <v-btn\n                v-if=\"proposalDialog.proposal.url\"\n                color=\"primary\"\n                variant=\"tonal\"\n                prepend-icon=\"mdi-open-in-new\"\n                :href=\"proposalDialog.proposal.url\"\n                target=\"_blank\"\n                class=\"mt-2\"\n              >\n                View Original\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-card-text>\n        \n        <v-card-text v-else class=\"py-4 text-center\">\n          <v-progress-circular indeterminate color=\"primary\"></v-progress-circular>\n          <p class=\"mt-2\">Loading proposal details...</p>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport axios from 'axios'\n\n// Get the API base URL from environment or use default\nconst apiBaseUrl = process.env.VUE_APP_API_URL || 'http://localhost:5001/api'\n\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n      search: '',\n      headers: [\n        { title: 'ID', key: 'id', align: 'start', sortable: true },\n        { title: 'Title', key: 'title', align: 'start', sortable: true },\n        { title: 'Source', key: 'source', align: 'start', sortable: true },\n        { title: 'Date', key: 'date', align: 'start', sortable: true },\n        { title: 'Status', key: 'status', align: 'start', sortable: true }\n      ],\n      healthResults: [],\n      confirmDialog: {\n        show: false,\n        title: '',\n        message: '',\n        requireInput: false,\n        inputLabel: '',\n        input: '',\n        action: null\n      },\n      snackbar: {\n        show: false,\n        text: '',\n        color: 'success',\n        timeout: 5000\n      },\n      // New properties for filters\n      statusFilter: 'All',\n      sourceFilter: 'All',\n      dateRange: [],\n      dateMenu: false,\n      naicsFilter: null,\n      setAsideFilter: 'All',\n      // New property for proposal details dialog\n      proposalDialog: {\n        show: false,\n        proposal: null\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'isLoading',\n      'hasError',\n      'errorMessage',\n      'dashboardData',\n      'lastUpdated'\n    ]),\n    // Computed property for filtered proposals\n    filteredProposals() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return []\n      }\n      \n      let filtered = [...this.dashboardData.proposals]\n      \n      // Apply search filter\n      if (this.search) {\n        const searchLower = this.search.toLowerCase()\n        filtered = filtered.filter(proposal => \n          proposal.title.toLowerCase().includes(searchLower) ||\n          proposal.id.toString().includes(searchLower) ||\n          proposal.source.toLowerCase().includes(searchLower)\n        )\n      }\n      \n      // Apply status filter\n      if (this.statusFilter !== 'All') {\n        filtered = filtered.filter(proposal => proposal.status === this.statusFilter)\n      }\n      \n      // Apply source filter\n      if (this.sourceFilter !== 'All') {\n        filtered = filtered.filter(proposal => proposal.source === this.sourceFilter)\n      }\n      \n      // Apply date range filter\n      if (this.dateRange.length === 2) {\n        const startDate = new Date(this.dateRange[0])\n        const endDate = new Date(this.dateRange[1])\n        endDate.setHours(23, 59, 59, 999) // End of day\n        \n        filtered = filtered.filter(proposal => {\n          const proposalDate = new Date(proposal.date)\n          return proposalDate >= startDate && proposalDate <= endDate\n        })\n      }\n      \n      // Apply NAICS filter\n      if (this.naicsFilter) {\n        filtered = filtered.filter(proposal => \n          proposal.naicsCode === this.naicsFilter\n        )\n      }\n      \n      // Apply set-aside filter\n      if (this.setAsideFilter !== 'All') {\n        filtered = filtered.filter(proposal => \n          proposal.setAside === this.setAsideFilter\n        )\n      }\n      \n      return filtered\n    },\n    // Computed property for date range text\n    dateRangeText() {\n      if (!this.dateRange || this.dateRange.length === 0) {\n        return ''\n      }\n      \n      if (this.dateRange.length === 1) {\n        return this.formatDateShort(this.dateRange[0])\n      }\n      \n      return `${this.formatDateShort(this.dateRange[0])} - ${this.formatDateShort(this.dateRange[1])}`\n    },\n    // Computed property for source options\n    sourceOptions() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return ['All']\n      }\n      \n      const sources = new Set(this.dashboardData.proposals.map(p => p.source))\n      return ['All', ...Array.from(sources)]\n    },\n    // Computed property for NAICS codes\n    naicsCodes() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return []\n      }\n      \n      const naicsCodes = new Set()\n      this.dashboardData.proposals.forEach(p => {\n        if (p.naicsCode) {\n          naicsCodes.add(p.naicsCode)\n        }\n      })\n      \n      return Array.from(naicsCodes)\n    },\n    // Computed property for set-aside options\n    setAsideOptions() {\n      if (!this.dashboardData || !this.dashboardData.proposals) {\n        return ['All']\n      }\n      \n      const setAsides = new Set()\n      this.dashboardData.proposals.forEach(p => {\n        if (p.setAside) {\n          setAsides.add(p.setAside)\n        }\n      })\n      \n      return ['All', ...Array.from(setAsides)]\n    }\n  },\n  methods: {\n    formatDate(dateString) {\n      if (!dateString) return 'N/A'\n      const date = new Date(dateString)\n      return date.toLocaleString()\n    },\n    formatDateShort(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return date.toLocaleDateString()\n    },\n    getStatusColor(status) {\n      const statusMap = {\n        'Active': 'success',\n        'Pending': 'warning',\n        'Completed': 'info',\n        'Cancelled': 'error'\n      }\n      return statusMap[status] || 'grey'\n    },\n    // New method to reset filters\n    resetFilters() {\n      this.search = ''\n      this.statusFilter = 'All'\n      this.sourceFilter = 'All'\n      this.dateRange = []\n      this.naicsFilter = null\n      this.setAsideFilter = 'All'\n    },\n    // New method to show proposal details\n    showProposalDetails(proposal) {\n      this.proposalDialog.proposal = proposal\n      this.proposalDialog.show = true\n    },\n    showConfirmDialog(title, message, action, requireInput = false, inputLabel = '') {\n      this.confirmDialog = {\n        show: true,\n        title,\n        message,\n        requireInput,\n        inputLabel,\n        input: '',\n        action\n      }\n    },\n    confirmAction() {\n      if (this.confirmDialog.requireInput && \n          this.confirmDialog.input !== this.confirmDialog.inputLabel) {\n        this.showSnackbar('Please type the confirmation text exactly as shown', 'error')\n        return\n      }\n      \n      this.confirmDialog.show = false\n      if (typeof this.confirmDialog.action === 'function') {\n        this.confirmDialog.action()\n      }\n    },\n    showSnackbar(text, color = 'success', timeout = 5000) {\n      this.snackbar = {\n        show: true,\n        text,\n        color,\n        timeout\n      }\n    },\n    rebuildDatabase() {\n      this.showConfirmDialog(\n        'Rebuild Database',\n        'WARNING: This will rebuild the database from scratch.<br><br>' +\n        'This operation will:<br>' +\n        '1. Create a backup of the current database<br>' +\n        '2. Rebuild the database structure<br>' +\n        '3. Preserve your data<br><br>' +\n        'The application may need to be restarted after this operation.',\n        this.performDatabaseRebuild\n      )\n    },\n    async performDatabaseRebuild() {\n      try {\n        await axios.post(`${apiBaseUrl}/rebuild-db`)\n        this.showSnackbar('Database rebuild started. The application may need to be restarted.')\n      } catch (error) {\n        console.error('Error rebuilding database:', error)\n        this.showSnackbar('Failed to rebuild database: ' + error.message, 'error')\n      }\n    },\n    initializeDatabase() {\n      this.showConfirmDialog(\n        'Initialize Database',\n        'WARNING: This will delete the current database and create a new one!<br><br>' +\n        'This operation will:<br>' +\n        '1. Delete ALL existing data<br>' +\n        '2. Create a new empty database<br>' +\n        '3. Initialize the data sources<br><br>' +\n        'This operation cannot be undone. All your data will be permanently lost.',\n        this.performDatabaseInitialization,\n        true,\n        'INIT'\n      )\n    },\n    async performDatabaseInitialization() {\n      try {\n        await axios.post(`${apiBaseUrl}/init-db`)\n        this.showSnackbar('Database initialization started. The page will reload shortly.')\n        setTimeout(() => window.location.reload(), 5000)\n      } catch (error) {\n        console.error('Error initializing database:', error)\n        this.showSnackbar('Failed to initialize database: ' + error.message, 'error')\n      }\n    },\n    deleteAllFiles() {\n      this.showConfirmDialog(\n        'Delete All Files',\n        'WARNING: This is a destructive operation!<br><br>' +\n        'This will:<br>' +\n        '1. Delete ALL downloaded files<br>' +\n        '2. Delete ALL database backups<br>' +\n        '3. Delete the current database<br>' +\n        '4. Create a new empty database<br><br>' +\n        'This operation cannot be undone. All your data will be permanently lost.',\n        this.performDeleteAllFiles,\n        true,\n        'RESET'\n      )\n    },\n    async performDeleteAllFiles() {\n      try {\n        await axios.post(`${apiBaseUrl}/reset-everything`)\n        this.showSnackbar('Reset initiated. The application will be reloaded shortly.')\n        setTimeout(() => window.location.reload(), 5000)\n      } catch (error) {\n        console.error('Error resetting everything:', error)\n        this.showSnackbar('Failed to reset: ' + error.message, 'error')\n      }\n    },\n    async runHealthChecks() {\n      try {\n        this.healthResults = []\n        this.showSnackbar('Running health checks...', 'info')\n        \n        // Get all data sources\n        const sourcesResponse = await axios.get(`${apiBaseUrl}/data-sources`)\n        const sources = sourcesResponse.data\n        \n        if (!sources || sources.length === 0) {\n          this.showSnackbar('No data sources found', 'warning')\n          return\n        }\n        \n        // Run health checks for each source\n        const healthCheckPromises = sources.map(source => \n          axios.post(`${apiBaseUrl}/scraper-status/${source.id}/check`)\n            .then(response => {\n              const result = response.data\n              result.sourceName = source.name\n              return result\n            })\n        )\n        \n        // Wait for all health checks to complete\n        this.healthResults = await Promise.all(healthCheckPromises)\n        \n        // Count successes and failures\n        const successes = this.healthResults.filter(result => \n          result.success && result.status === 'working'\n        ).length\n        \n        const failures = this.healthResults.filter(result => \n          result.success && result.status === 'not_working'\n        ).length\n        \n        const errors = this.healthResults.filter(result => !result.success).length\n        \n        this.showSnackbar(`Health checks completed: ${successes} working, ${failures} not working, ${errors} errors.`)\n      } catch (error) {\n        console.error('Error running health checks:', error)\n        this.showSnackbar('Failed to run health checks: ' + error.message, 'error')\n      }\n    }\n  },\n  mounted() {\n    this.$store.dispatch('fetchDashboardData')\n  }\n}\n</script>\n\n<style scoped>\n.max-width-300 {\n  max-width: 300px;\n}\n\n.h-100 {\n  height: 100%;\n}\n\n.proposal-row {\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.proposal-row:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}